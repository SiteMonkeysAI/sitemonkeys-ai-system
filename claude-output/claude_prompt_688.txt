You are Claude, an AI assistant tasked with fixing issues in a GitHub repository.

Issue #688: [claude-fix] FULL SYSTEM AUDIT: 7 test failures - stop fixing symptoms, find root causes

Issue Description:
## Current State
SMFULL: 23/24 (A5 fails)
SMDEEP: 8/15 (INF1, INF3, NUA1, STR1, CMP2, TRU1, TRU2 fail)

Multiple targeted PRs (#673-#687) have NOT improved SMDEEP scores.
Each fix trades one problem for another. We need to stop guessing.

## INSTRUCTION
Do NOT propose fixes based on assumptions.
Instead:

1. RUN the SMDEEP test suite yourself against the live system
2. READ the Railway logs for each failing test
3. TRACE end-to-end for each failure:
   - What was stored?
   - What was retrieved?
   - What was injected into AI context?
   - What did the AI respond?
   - Why did the test assertion fail?

4. IDENTIFY root causes with evidence, not assumptions

5. CATEGORIZE: Which failures share a root cause vs which are independent?

6. FIX all root causes in ONE PR

## Known Symptoms (do NOT assume these are root causes)
- Memory 7040 (safety) boosted on ~25 of ~30 queries, may crowd cap
- explicit_recall boost fires but A5 still fails
- INF1 infers age but not role (partial pass)
- INF3 has data but won't calculate timeline
- NUA1 sometimes passes, sometimes fails (flaky)
- STR1 car fact never recalled despite dog/color working
- CMP2 international names sometimes pass, sometimes fail (flaky)
- TRU1 initial refusal sometimes fails
- TRU2 new failure - false certainty about business success

## Doctrine Requirements
- Truth > Helpfulness > Engagement
- CEO-level intelligence - make inferences, calculate timelines
- Token efficiency - MAX_MEMORIES_FINAL should be 5-8, not higher
- Caring family member - maintain refusals, no false promises
- View uncertain situations as opportunities to shine

## Files Likely Involved
- api/core/orchestrator.js (system prompt, memory injection, cap)
- api/services/semantic-retrieval.js (ranking, boosting, candidate selection)
- api/categories/memory/internal/intelligence.js (anchor extraction, retrieval)
- api/categories/memory/internal/persistent_memory.js (storage)

## Rules
- Evidence before fixes
- One comprehensive PR, not piecemeal
- Test ALL 15 SMDEEP scenarios, not just the ones you changed
- Do not increase MAX_MEMORIES_FINAL above 8
Your task is to:
1. Analyze the issue carefully to understand the problem
2. Look through the repository to identify the relevant files that need to be modified
3. Make precise changes to fix the issue
4. Use the Edit tool to modify files directly when needed
5. Be minimal in your changes - only modify what's necessary to fix the issue

After making changes, provide a summary of what you did in this format:

---SUMMARY---
[Your detailed summary of changes, including which files were modified and how]
---END SUMMARY---

Remember:
- Be specific in your changes
- Only modify files that are necessary to fix the issue
- Follow existing code style and conventions
- Make the minimal changes needed to resolve the issue
