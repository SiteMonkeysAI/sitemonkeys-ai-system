<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SiteMonkeys AI - Business Validation System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            padding: 20px;
            background: #000;
            border: 2px solid #ffd700;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 24px;
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #ccc;
            font-size: 16px;
        }
        
        .main-container {
            display: grid;
            grid-template-columns: 250px 1fr 250px;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        .mascot-section {
            background: #333;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .mascot-img {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .mascot-name {
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .status-panel {
            background: #222;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
        }
        
        .status-title {
            color: #ffd700;
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .status-item {
            font-size: 12px;
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .chat-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 20px;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 400px;
        }
        
        .chat-header {
            text-align: center;
            margin-bottom: 20px;
            color: #1a1a2e;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            max-height: 300px;
            padding: 10px;
            background: rgba(240, 240, 240, 0.8);
            border-radius: 5px;
        }
        
        .message {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }
        
        .input-area {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .send-btn {
            background: #ffd700;
            color: #1a1a2e;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .send-btn:hover {
            background: #ffed4e;
        }
        
        .loading {
            text-align: center;
            padding: 10px;
            font-style: italic;
            color: #666;
        }
        
        .cost-tracker {
            text-align: center;
            font-size: 12px;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="title">üêí SITE MONKEYS AI üêí</div>
        <div class="subtitle">Business Validation System</div>
    </div>
    
    <div class="main-container">
        <!-- LEFT MASCOT - ELI -->
        <div class="mascot-section">
            <img src="boy-mascot.png" alt="Eli" class="mascot-img" onerror="this.style.display='none'">
            <div class="mascot-name">ELI</div>
            
            <div class="status-panel">
                <div class="status-title">üîê VAULT STATUS</div>
                <div class="status-item">
                    <span>Status:</span>
                    <span id="vaultStatus">Loading...</span>
                </div>
                <div class="status-item">
                    <span>Tokens:</span>
                    <span id="tokenCount">Calculating...</span>
                </div>
                <div class="status-item">
                    <span>Folders:</span>
                    <span id="folderCount">Scanning...</span>
                </div>
                <div class="status-item">
                    <span>Cost:</span>
                    <span id="estimatedCost">$0.00</span>
                </div>
            </div>
            
            <div class="status-panel">
                <div class="status-title">üí∞ CONSTRAINTS</div>
                <div class="status-item">
                    <span>Budget:</span>
                    <span>$15K</span>
                </div>
                <div class="status-item">
                    <span>Burn:</span>
                    <span><$3K/mo</span>
                </div>
                <div class="status-item">
                    <span>Margins:</span>
                    <span>87%+</span>
                </div>
            </div>
        </div>
        
        <!-- CENTER CHAT AREA -->
        <div class="chat-area">
            <div class="chat-header">
                <h2>üéØ Business Validation Console</h2>
                <p>AI-powered strategic advisor</p>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message">
                    <strong>SiteMonkeys AI:</strong> <span id="welcomeMessage">Initializing business intelligence vault...</span>
                </div>
            </div>
            
            <div class="loading" id="loading" style="display: none;">
                Processing your request...
            </div>
            
            <div class="input-area">
                <input type="text" class="chat-input" id="chatInput" placeholder="Ask about your business strategy, financials, or launch preparation...">
                <button class="send-btn" id="sendBtn">üöÄ Send</button>
            </div>
            
            <div class="cost-tracker">
                <span id="costTracker">API Calls: 0 | Estimated Cost: $0.00</span>
            </div>
        </div>
        
        <!-- RIGHT MASCOT - ROXY -->
        <div class="mascot-section">
            <img src="girl-mascot.png" alt="Roxy" class="mascot-img" onerror="this.style.display='none'">
            <div class="mascot-name">ROXY</div>
            
            <div class="status-panel">
                <div class="status-title">‚ö° SYSTEM STATUS</div>
                <div class="status-item">
                    <span>API:</span>
                    <span id="apiStatus">Testing...</span>
                </div>
                <div class="status-item">
                    <span>Uptime:</span>
                    <span>99.8%</span>
                </div>
                <div class="status-item">
                    <span>Security:</span>
                    <span>Active</span>
                </div>
                <div class="status-item">
                    <span>Zero-Fail:</span>
                    <span>Enabled</span>
                </div>
            </div>
            
            <div class="status-panel">
                <div class="status-title">üìä PRICING TIERS</div>
                <div class="status-item">
                    <span>Boost:</span>
                    <span>$697</span>
                </div>
                <div class="status-item">
                    <span>Climb:</span>
                    <span>$1,497</span>
                </div>
                <div class="status-item">
                    <span>Lead:</span>
                    <span>$2,997</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let messageCount = 0;
        let totalCost = 0;
        
        // Load vault data on page load
        async function loadVault() {
            try {
                const response = await fetch('/api/load-vault');
                const data = await response.json();
                
                // Update vault status
                document.getElementById('vaultStatus').textContent = data.status || 'Loaded';
                document.getElementById('tokenCount').textContent = data.tokens || '0';
                
                // Update folder count
                const folderCount = data.folders_loaded ? data.folders_loaded.length : 0;
                document.getElementById('folderCount').textContent = folderCount;
                
                // Calculate estimated cost
                const estimatedCost = (data.tokens * 0.002 / 1000).toFixed(4);
                document.getElementById('estimatedCost').textContent = `$${estimatedCost}`;
                
                // Update API status
                document.getElementById('apiStatus').textContent = 'Online';
                
                // Update welcome message
                document.getElementById('welcomeMessage').textContent = 
                    `Welcome to the SiteMonkeys Business Validation System! I have your complete vault loaded with financial constraints ($15K budget, $3K burn, 87% margins), pricing tiers ($697/$1,497/$2,997), legal framework, and zero-failure protocols. Ready to validate your launch preparation and transform your business strategy!`;
                
            } catch (error) {
                console.error('Vault loading error:', error);
                document.getElementById('vaultStatus').textContent = 'Error';
                document.getElementById('apiStatus').textContent = 'Offline';
                document.getElementById('welcomeMessage').textContent = 
                    'System initialization failed. Please refresh the page or contact support.';
            }
        }
        
        // Send message function
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addMessage(`You: ${message}`, 'user');
            input.value = '';
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            
            try {
                // Simulate AI response (you can replace with actual API call)
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const responses = [
                    "Based on your $15K launch budget and $3K monthly burn rate, I recommend prioritizing the 4-week sprint implementation to achieve breakeven by month 3.",
                    "Your 87% margin target is achievable with the current pricing structure. The $697-$2,997 tiers provide optimal market positioning against $30K agencies.",
                    "The zero-failure protocols are operational. All legal frameworks including NDAs and compliance measures are properly configured for contractor protection.",
                    "Your vault contains complete business intelligence. Financial constraints, pricing strategy, and implementation roadmap are all accessible for strategic validation.",
                    "The Site Monkeys platform is designed for scalability. Current architecture supports 100K+ customers without human runtime dependencies."
                ];
                
                const response = responses[Math.floor(Math.random() * responses.length)];
                const aiName = messageCount % 2 === 0 ? 'Eli' : 'Roxy';
                
                addMessage(`${aiName}: ${response}`, 'ai');
                
                // Update cost tracking
                messageCount++;
                totalCost += 0.02;
                document.getElementById('costTracker').textContent = 
                    `API Calls: ${messageCount} | Estimated Cost: $${totalCost.toFixed(2)}`;
                
            } catch (error) {
                addMessage('SiteMonkeys AI: System temporarily unavailable. Please try again.', 'error');
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }
        
        // Add message to chat
        function addMessage(text, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.innerHTML = `<strong>${text}</strong>`;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Event listeners
        document.getElementById('sendBtn').addEventListener('click', sendMessage);
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', loadVault);
    </script>
</body>
</html>
